{% extends 'layout.html' %}

{% block contenido %}
    <h1 style="color: darkcyan; font-family: fantasy;">{{titulo}}</h1>
    <form action="/formulario_clientes" method="post" id="formulario_clientes" name="formulario_clientes" onsubmit="return validarEmail();">
        <div class="form-row" >
          <div class="col-md-4 mb-3">
            <label for="validationTooltip01">Nombres</label>
            <input type="text" class="form-control" name="nombres" {% if cliente_almacenar %} value="{{ cliente_almacenar.nombres }}" {% endif %} id="validationTooltip01" placeholder="Nombres"  required>
            <div class="valid-tooltip">
              Por favor ingresar un nombre
            </div>
            <span class="alert alert-danger" role="alert" id="errorNombres" style="display: none;">El campo nombres no puede estar vacío.</span>
          </div>
          <div class="col-md-4 mb-3">
            <label for="validationTooltip02">Apellidos</label>
            <input type="text" class="form-control" name="apellidos" {% if cliente_almacenar %} value="{{ cliente_almacenar.apellidos }}" {% endif %}id="validationTooltip02" placeholder="Apellidos"  required>
            <div class="valid-tooltip">
              por favor ingresar algun caracter
            </div>
            <span class="alert alert-danger" role="alert" id="errorApellidos" style="display: none;">El campo apellidos no puede estar vacío.</span>
          </div>
          <div class="col-md-4 mb-3">
            <label for="validationTooltipUsername">Email</label>
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text" id="validationTooltipUsernamePrepend">@</span>
              </div>
              <input type="text" class="form-control" name="email" {% if cliente_almacenar %} value="{{ cliente_almacenar.email }}" {% endif %} id="email" placeholder="Email" aria-describedby="validationTooltipUsernamePrepend" required  onblur="validarEmail ()">
              <span class="alert alert-danger" role="alert" id="errorEmail" style="display: none;">Error el campo debe tener nombre de usuario, @ y dominio</span> 
              <div class="invalid-tooltip">
                Por favor poner un usuario valido.
              </div>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="col-md-6 mb-3">
            <label for="validationTooltip03">Ciudad</label>
            <input type="text" class="form-control" name="ciudad" {% if cliente_almacenar %} value="{{ cliente_almacenar.ciudad }}" {% endif %} id="validationTooltip03" placeholder="Ciudad" required>
            <div class="invalid-tooltip">
              Indique una ciudad valida.
            </div>
            <span class="alert alert-danger" role="alert" id="errorCiudad" style="display: none;">El campo ciudad no puede estar vacío.</span>
          </div>
          <div class="col-md-3 mb-3">
            <label for="validationTooltip04">Departamento</label>
            <input type="text" class="form-control" name="departamento" {% if cliente_almacenar %} value="{{ cliente_almacenar.departamento }}" {% endif %} id="validationTooltip04" placeholder="Departamento" required>
            <div class="invalid-tooltip">
              Indique un departamento valido.
            </div>
            <span class="alert alert-danger" role="alert" id="errorDepartamento" style="display: none;">El campo departamento no puede estar vacío.</span>
          </div>
          <div class="col-md-3 mb-3">
            <label for="validationTooltip05">Direccion</label>
            <input type="text" class="form-control" name="direccion" {% if cliente_almacenar %} value="{{ cliente_almacenar.direccion }}" {% endif %} id="validationTooltip05" placeholder="Direccion" required>
            <div class="invalid-tooltip">
              Indique una direccion valida.
            </div>
          </div>
          <div class="col-md-3 mb-3">
            <label for="validationTooltip06">Documento de identidad</label>
            <input type="text" class="form-control"  name="documento_identidad" {% if cliente_almacenar %} value="{{ cliente_almacenar.documento_identidad }}" {% endif %} id="validationTooltip06" placeholder="Documento de identidad" required>
          {% if errorCliente %}
              <span class="alert alert-danger" role="alert" id="errorCliente"  style="display: block;">{{ errorCliente }}</span>
          {% endif %}
            <div class="invalid-tooltip">
              Indique un documento valido.
            </div>
            <span class="alert alert-danger" role="alert" id="errorDocumento" style="display: none;">El campo documento de identidad no puede estar vacío.</span>
          </div>
          <div class="col-md-3 mb-3">
            <label for="validationTooltip08">Telefono</label>
            <input type="text" class="form-control" name="telefono" {% if cliente_almacenar %} value="{{ cliente_almacenar.telefono }}" {% endif %} id="validationTooltip08" placeholder="Telefono" required>
            <div class="invalid-tooltip">
              Indique un Telefono valido.
            </div>
            <span class="alert alert-danger" role="alert" id="errorTelefono" style="display: none;">El campo teléfono no puede estar vacío.</span>
          </div>
        </div>
        <button class="btn btn-primary" type="submit">Enviar</button>
      </form>
      <script>
  function validarEmail() {
    let campoEmail = document.getElementById("email");
    let valorEmail = campoEmail.value.trim();
    let errorEmail = document.getElementById("errorEmail");
    let expresionEmail = /^[^@]+@[^@]+\.[a-zA-Z]{2,}$/;

    if (expresionEmail.test(valorEmail)) {
      errorEmail.style.display = 'none';
      return true;
    } else {
      errorEmail.style.display = 'block';
      return false;
    }
  }

  function validarFormulario() {
    return validarEmail(); 
  }
</script>
{% endblock contenido %}